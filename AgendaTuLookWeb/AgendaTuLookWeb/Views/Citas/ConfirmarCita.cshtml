@inject IHttpContextAccessor HttpContextAccessor
@{
    var usuarioId = HttpContextAccessor.HttpContext.Session.GetString("UsuarioId");
}

<div class="pb-4">
    <div class="row">
        <div class="col-12">
            <h1 class="display-4">Confirmación de cita</h1>
            <p class="text-muted">Por favor verifica que todos los datos sean correctos antes de confirmar.</p>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="bg-white rounded rounded-1 p-3 mb-3">

                <!-- Info del Cliente -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="mb-0">
                            <i class="fas fa-user-circle mr-2" style="color:#321914"></i> Información Personal
                        </h4>
                        <div class="text-end">
                            <small class="text-muted me-2">¿La información personal no está correcta?</small>
                            <a asp-controller="Usuarios" asp-action="PerfilUsuario" asp-route-id="@usuarioId"
                               class="btn btn-sm btn-outline-secondary">
                                <i class="fas fa-user-edit me-1"></i> Actualizar
                            </a>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Nombre:</label>
                            <div class="form-control bg-light py-2" readonly>Juan Pérez Rodríguez</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Correo electrónico:</label>
                            <div class="form-control bg-light py-2" readonly>juanperez@correo.com</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">Teléfono:</label>
                            <div class="form-control bg-light py-2" readonly>88888888</div>
                        </div>
                    </div>
                </div>

                <!-- Detalles cita -->
                <div class="mb-4">
                    <h4 class="mb-3">
                        <i class="fas fa-calendar-alt mr-2" style="color:#321914"></i> Detalles de la Cita
                    </h4>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Servicio:</label>
                            <div class="form-control bg-light py-2" readonly>Corte + Barba</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Precio:</label>
                            <div class="form-control bg-light py-2" readonly>₡10,000.00</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Duración:</label>
                            <div class="form-control bg-light py-2" readonly>30 minutos</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Fecha:</label>
                            <div class="form-control bg-light py-2" readonly>15/04/2023</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">Hora:</label>
                            <div class="form-control bg-light py-2" readonly>2:00 PM</div>
                        </div>
                    </div>
                </div>

                <!-- Pago????????? -->
                <div class="mb-4">
                    <h4 class="mb-3">
                        <i class="fas fa-credit-card mr-2" style="color:#321914"></i> Método de Pago
                    </h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="radio" name="metodoPago" id="efectivo" checked>
                                <label class="form-check-label fw-bold" for="efectivo">
                                    <i class="fas fa-money-bill-wave me-2"></i> Efectivo
                                </label>
                                <small class="text-muted d-block mt-1">Pago al momento del servicio</small>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="metodoPago" id="sinpe">
                                <label class="form-check-label fw-bold" for="sinpe">
                                    <i class="fas fa-mobile-alt me-2"></i> Sinpe
                                </label>
                                <small class="text-muted d-block mt-1">Transferencia electrónica</small>
                            </div>

                            <!-- Campo para comprobante Sinpe (oculto inicialmente) -->
                            <div id="comprobanteSinpeContainer" class="mt-3" style="display: none;">
                                <label class="form-label fw-bold mb-2">
                                    <i class="fas fa-paperclip me-2"></i> Adjuntar comprobante
                                </label>
                                <div class="border rounded p-3 text-center" style="border-style: dashed !important;">
                                    <i class="fas fa-cloud-upload-alt fa-2x text-muted mb-2"></i>
                                    <p class="mb-1">Arrastra tu comprobante aquí o</p>
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="fas fa-folder-open me-1"></i> Seleccionar archivo
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-5 d-flex justify-content-between">
                    <a asp-controller="Citas" asp-action="SolicitarFechaHora" class="btn btn-outline-secondary btn-lg">
                        <i class="fas fa-arrow-left mr-2"></i> Regresar
                    </a>
                    <button class="btn btn-primary btn-lg" style="background-color:#321914; border-color: #1F283E;">
                        <i class="fas fa-check-circle mr-2"></i> Confirmar Cita
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Mostrar/ocultar campo de comprobante al cambiar selección
    document.querySelectorAll('input[name="metodoPago"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const comprobanteContainer = document.getElementById('comprobanteSinpeContainer');
            comprobanteContainer.style.display = this.id === 'sinpe' ? 'block' : 'none';
        });
    });
</script>